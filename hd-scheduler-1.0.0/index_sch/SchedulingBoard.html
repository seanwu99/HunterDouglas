<!DOCTYPE html>

<html lang="en">
<!-- begin::Head -->
<head>
    <meta charset="utf-8"/>
    <meta name="description" content="Latest updates and statistic charts">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>
        Schedule | Dashboard
    </title>

    <!--<script id="sap-ui-bootstrap"-->
            <!--src="/sapui5/resources/sap-ui-core.js"-->
            <!--data-sap-ui-theme="sap_goldreflection"-->
            <!--data-sap-ui-libs="sap.ui.core,sap.ui.commons,sap.ui.table,sap.ui.ux3"-->
            <!--data-sap-ui-language="en">-->
    <!--</script>-->

    <script id="sap-ui-bootstrap"
            src="https://sapui5.netweaver.ondemand.com/resources/sap-ui-core.js"
            data-sap-ui-libs="sap.m"
            data-sap-ui-theme="sap_belize"
            data-sap-ui-xx-bindingSyntax="complex"
            data-sap-ui-compatVersion="edge">
    </script>


    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
    <script>
        WebFont.load({
            google: {"families": ["Poppins:300,400,500,600,700", "Roboto:300,400,500,600,700"]},
            active: function () {
                sessionStorage.fonts = true;
            }
        });
    </script>

    <link href="Common/metronic_v5.0.5/assets/vendors/custom/fullcalendar/fullcalendar.bundle.css" rel="stylesheet"
          type="text/css"/>
    <link href="Common/metronic_v5.0.5/assets/vendors/base/vendors.bundle.css" rel="stylesheet" type="text/css"/>
    <link href="Common/metronic_v5.0.5/assets/demo/demo2/base/style.bundle.css" rel="stylesheet" type="text/css"/>
    <link href='Common/metronic_v5.0.5/assets/vendors/custom/fullcalendar/scheduler.css' rel='stylesheet'/>




    <!--<link href="Common/metronic_v4.7.5/assets/global/plugins/bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css"/>-->
    <!--<link href="Common/metronic_v4.7.5/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet"-->
          <!--type="text/css"/>-->

    <!--<link href="Common/metronic_v4.7.5/assets/global/plugins/bootstrap-wysihtml5/bootstrap-wysihtml5.css" rel="stylesheet"-->
          <!--type="text/css"/>-->
    <!--<link href="Common/metronic_v4.7.5/assets/global/plugins/jquery-file-upload/blueimp-gallery/blueimp-gallery.min.css" rel="stylesheet"-->
          <!--type="text/css"/>-->
    <!--<link href="Common/metronic_v4.7.5/assets/global/plugins/jquery-file-upload/css/jquery.fileupload.css" rel="stylesheet"-->
          <!--type="text/css"/>-->
    <!--<link href="Common/metronic_v4.7.5/assets/global/plugins/jquery-file-upload/css/jquery.fileupload-ui.css" rel="stylesheet"-->
          <!--type="text/css"/>-->

    <!--<link href="Common/metronic_v4.7.5/assets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css"/>-->

    <!--<link href="Common/metronic_v4.7.5/assets/apps/css/inbox.min.css" rel="stylesheet" type="text/css"/>-->


    <!--end::Base Styles -->
    <link rel="shortcut icon" href="favicon.ico"/>
    <script>
        var mmmArray = [];
        var mmmSTR = '[Mold_Number]';

        var tableOrders = [];
        //            var tableOrdersURL = "MESM_ProductionOrdersListFromSAP.xml";
        var tableOrdersURL = "/XMII/Illuminator?QueryTemplate=OwensboroOneHD/SCHEDULE/QUERIES/SQL_ProductionOrdersListFromSAP&Content-Type=text/xml";


        var workCenter = [];
        //            var floorMapsURL = "MESM_FloorMaps.xml";
        var floorMapsURL = "/XMII/Illuminator?QueryTemplate=OwensboroOneHD/SCHEDULE/QUERIES/SQL_GetFloorMaps&Content-Type=text/xml";

        var floorMaps = [];

        $(function () {

            dateRangePicker();

            getData(floorMapsURL, function (DATA) {
//                cc(DATA);

//                cc(floorMapsURL + '/' + DATA.length);
                floorMaps = [];
                var wcg = [];
                for (var n = 0; n < DATA.length; n++) {
                    if (DATA[n]['MOLD_Machine_Matrix'] != "---") {


                        if (mmmSTR.indexOf(DATA[n]['MOLD_Machine_Matrix']) < 0) {
                            mmmSTR += ',[' + DATA[n]['MOLD_Machine_Matrix'] + ']';
                        }

                    }
                    floorMaps.push({
                        'recordID': DATA[n]['recordID'],
                        'unitType': DATA[n]['unitType'],
                        'unitName': DATA[n]['unitName'],
                        'unitDescr': DATA[n]['unitDescr'],
                        'idUnitParent': DATA[n]['idUnitParent'],
                        'groupType': DATA[n]['groupType'],
                        'MOLD_Machine_Matrix': DATA[n]['MOLD_Machine_Matrix'],
                    });
                    if (floorMaps[n]['unitType'] == '5' && floorMaps[n]['groupType'] == 'mold') {
                        wcg.push({
                            'recordID': floorMaps[n]['recordID'],
                            'unitName': floorMaps[n]['unitName'],
                            'unitDescr': floorMaps[n]['unitDescr']
                        });
                    }
                }
//                cc('mmmSTR ==> ' + mmmSTR);
//                cc(wcg);

                for (var n = 0; n < wcg.length; n++) {
                    for (var m = 0; m < floorMaps.length; m++) {
                        if (wcg[n]['recordID'] == floorMaps[m]['idUnitParent']) {
//                            cc(wcg[n]['unitName'] + '/' + wcg[n]['unitDescr'] + '/' + floorMaps[m]['unitName'] + '/' + floorMaps[m]['unitDescr'] + '/' + floorMaps[m]['recordID']);
                            workCenter.push({
                                    id: wcg[n]['unitName'] + '_' + floorMaps[m]['unitName'],
                                    WorkingCenter: wcg[n]['unitDescr'],
                                    title: floorMaps[m]['unitDescr'],
                                    wcg: wcg[n]['unitName'],
                                    MOLD_Machine_Matrix: floorMaps[m]['MOLD_Machine_Matrix'],
                                    children: [
//                                {id: 'a1', title: 'M649A', occupancy: 10, eventColor: 'blue'},
                                    ]
                                }
                            );
                        }
                    }
                }
//                cc(workCenter);
//                getData();
                creatSheduleForm(workCenter);

                cc((new Date().getTime() - t0) + ' ms (workCenter) ');

            });


            var tURL = "/XMII/Illuminator?QueryTemplate=OwensboroOneHD/SCHEDULE/QUERIES/getMoldMatrix&Content-Type=text/xml";
            var t0 = new Date().getTime();
//            cc(new Date());
//            cc(tURL);


            getData(tURL, function (DATA) {
//                cc(DATA.length);
                for (var n = 0; n < DATA.length; n++) {
                    var mmms = '';
                    for (var name in DATA[n]) {
                        if (DATA[n][name] == '1') {
                            mmms += '_' + name;
                        }

                    }
                    mmmArray[DATA[n]['Mold_Number']] = mmms;
                }

                cc((new Date().getTime() - t0) + ' ms (mmmArray) ');

                getData(tableOrdersURL, function (dataRows) {
//                cc(tableOrdersURL + '/' + dataRows.length);
//                    cc('dataRows');
//                    cc(dataRows);
                    tableOrders = [];
                    $.each(dataRows, function (i, data) {
//                        cc('dataRows');
//                        cc(data);
                        var md = data.MoldNumber;
                        var gp = data.WorkCntrGroup;

//                        cc(workCenter);
//                        cc(workCenter.length);
                        var av = false;
                        var wcID;
                        for (var m = 0; m < workCenter.length; m++) {
                            if (workCenter[m]['wcg'] == gp) {
                                if (mmmArray[md] != null && mmmArray[md].indexOf(workCenter[m]['MOLD_Machine_Matrix']) > 0) {
                                    av = true;
//                                    cc(md + ' / ' + mmmArray[md]);
//                                cc(workCenter[m]['MOLD_Machine_Matrix']);

                                    wcID = workCenter[m]['id'];

                                    m = 999999;
                                }
                            }


//                            if (workCenter['MOLD_Machine_Matrix']) {
//                            }
                        }
                        var st = Math.round(1 + Math.random() * 5);
                        if (av) st = 7;
                        tableOrders.push({
                            "RecordID": data.ID,
                            "OrderID": data.ORDER_NUMBER,
                            "MATERIAL": data.MATERIAL,
                            "TARGET": data.TARGET_QUANTITY,
                            "START": moment(data.SCHED_date).format('MMM DD, YYYY'),
                            "END": moment(data.FINISH_date).format('MMM DD, YYYY'),
                            "WCG": data.WorkCntrGroup,
                            "Mold": data.MoldNumber,
                            "Status": st,
                            "wcID": wcID
                        });
                    });
                    creatTableOrder(tableOrders);
                    cc((new Date().getTime() - t0) + ' ms (tableOrders) ');

                });
//                cc(mmmArray);
            });
        });

        function cc(obj) {
            console.log(obj);
        }


        var calendar;


        var creatSheduleForm = function (eventSources) {

            var today = new Date().toISOString().substr(0, 10);

            calendar = $('#calendar').fullCalendar({

                now: today,
                editable: true,
//			aspectRatio: 1.8,
                scrollTime: '00:00',
//                themeSystem: 'jquery-ui',
//                themeSystem: 'bootstrap3',
//                hiddenDays: [ 1, 3, 5 ],
//                firstDay: 0,
//                isRTL:false,
//                weekends: true,
//                hiddenDays:[],
//                columnHeader: true,
//                businessHours: false,
//                nowIndicator:true,
//                allDaySlot:true,
                slotDuration: '00:15:00',
                slotLabelInterval: '01:00:00',
                snapDuration: '00:15:00',
                minTime: '00:00:00',
                maxTime: '24:00:00',
                scrollTime: '00:00:00',
                noEventsMessage: 'No events to display',
                agendaEventMinHeight: 50,  //vertical
                listDayFormat: true,
                listDayAltFormat: true,
                slotEventOverlap: true,
                fixedWeekCount: true,
                nowIndicator: true,
                timeFormat: 'h:mm:ss',
                titleFormat: 'MMMM D, YYYY',
                monthNames: ['January', 'February', 'March3', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
                monthNamesShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
                dayNamesShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],

//                displayEventTime: true,
//                displayEventEnd: true,
//                eventLimit: true, // for all non-agenda views
//                views: {
//                    agenda: {
//                        eventLimit: 6 // adjust to 6 only for agendaWeek/agendaDay
//                    }
//                },
                eventLimitText: 'click for more',
                eventStartEditable: true,
                eventDurationEditable: true,
                dragRevertDuration: 500,
                dragOpacity: .75,
                dragScroll: true,
                eventOverlap: true, // todo +more

                eventClick: function (event, element) {
//                    cc('eventCLICKED');
//                    cc(event);
                    event.title = "CLICKED ON";
//                    cc(event.start._d);

                    event.start._d = new Date(event.start.format());
                    $('#calendar').fullCalendar('updateEvent', event);

//                    $('#calendar').fullCalendar('refetchEvents');

                    $('#calendar').fullCalendar('refresh');

//                    $('#calendar').fullCalendar('refetchEventSources');
                },


// * * * *
                eventAllow: function (dropLocation, draggedEvent) {
//                    cc(draggedEvent.id);
//                    if (draggedEvent.id === '11') {
//                        cc(dropLocation);
//                        return dropLocation.start.isAfter('2016-01-01'); // a boolean
//                    } else {
//                        return true;
//                    }
                },

// * * * *
                eventDragStart: function (event, jsEvent, ui, view) {
//                    cc('eventDragStart' + event);

                },

// * * * *
                eventDragStop: function (event, jsEvent, ui, view) {
//                    cc('eventDragStop' + event);

                },

// * * * *
                eventDrop: function (event, delta, revertFunc) {
//                    cc(event);
//                    alert(event.title + " was dropped on " + event.start.format());
//
//                    if (!confirm("Are you sure about this change?")) {
//                        revertFunc();
//                    }

                },


// * * *
                eventResizeStart: function (event, jsEvent, ui, view) {
//                    cc(event);
                },

// * * *
                eventResizeStop: function (event, jsEvent, ui, view) {
//                    cc(event);
                },

// * * *
                eventResize: function (event, jsEvent, ui, view) {
//                    cc(event);
                },
// * * * * *
                slotWidth: 10,

                height: 500,
                selectable: true,
                selectHelper: true,
                customButtons: {
                    myCustomButton: {
                        text: 'CustomButton',
                        click: function () {
//                            cc('custom button');
// * * *
//                            $('#calendar').fullCalendar('removeEvents', 111);

//* * * *
//                         var ce = $('#calendar').fullCalendar('clientEvents', 11);
// //                            cc(ce[0].id);
// //                            cc(ce[0].start);
//                         ce.t
                            $('#calendar').fullCalendar('updateEvent', event);
//                            cc(ce.end);
// * * *                     $('#calendar').fullCalendar('refetchEvents');

// * * *                     $('#calendar').fullCalendar('refetchEventSources');

// * * *                     $('#calendar').fullCalendar('addEventSource');

// * * *                     $('#calendar').fullCalendar('removeEventSource');
                        },
                        icon: 'left-double-arrow'
                    }
                },
                header: {
                    left: 'today prev,next myCustomButton',
                    center: 'title',
                    right: 'timelineDay,timelineThreeDays,agendaWeek,month'
                },

                defaultView: 'timelineDay',
//                visibleRange doesn't work for 'timelineDay'
//                visibleRange : {
//                    start: '2017-11-03T00:00:00',
//                    end: '2017-11-03T07:00:00'
//                },

                validRange: {   //works for timelineDay
                    start: today + 'T00:00:00',
                    end: today + 'T24:00:00'
                },

                views: {
                    timelineThreeDays: {
                        type: 'timeline',
                        duration: {days: 3}
                    }
                },
                resourceGroupField: 'WorkingCenter',
                resourceLabelText: 'Working Centers',
                resources: eventSources,
                events: [
//                    {
//                        id: 'GROUP1_PRESS07',
//                        resourceId: 'GROUP1_PRESS07_39',
//                        start: today + 'T08:00:00',
//                        end: today + 'T16:00:00',
//                        title: 'M639A',
//                        description: 'This is a  event',
//                        color: 'red'
//                    },
//                    {
//                        id: '2',
//                        resourceId: 'e1',
//                        start: today + 'T07:00:00',
//                        end: today + 'T15:00:00',
//                        title: 'M639',
//                        description: 'This is a  event'
//                    },
//                    {
//                        id: '2',
//                        resourceId: 'e1',
////                        start: today + 'T15:30:00',
////                        end: today + 'T23:00:00',
//                        start: today + 'T15:30:00',
//                        end: today + 'T23:00:00',
//                        title: 'M639',
//                        description: 'This is a  event'
//                    },
//                    {
//                        id: '22',
//                        resourceId: 'd1',
//                        start: today + 'T15:00:00',
//                        end: today + 'T23:00:00',
//                        title: 'M640',
//                        description: 'This is a  event'
//                    },
//                    {
//                        id: '3',
//                        resourceId: 'b1',
//                        start: today + 'T07:00:00',
//                        end: today + 'T15:00:00',
//                        title: 'M995',
//                        description: 'This is a  event'
//                    },
//                    {
//                        id: '11',
//                        resourceId: 'f1',
//                        start: today + 'T00:58:30',
//                        end: today + 'T05:00:00',
//                        title: 'M639 orange',
//                        description: 'This is a  event',
//                        textColor: 'black',
//                        color: 'orange',
//                        url: 'http://localhost',
//                        editable: true,
//                    },
//                    {
//                        id: '12',
//                        resourceId: 'f2',
//                        start: today + 'T05:00:00',
//                        end: today + 'T08:00:00',
//                        title: 'M639 green',
//                        description: 'This is a  event'
//                    },
//                    {
//                        id: '13',
//                        resourceId: 'f3',
//                        start: today + 'T08:00:00',
//                        end: today + 'T12:00:00',
//                        title: 'M653',
//                        description: 'This is a  event'
//                    },
//                    {
//                        id: '14',
//                        resourceId: 'f4',
//                        start: today + 'T12:00:00',
//                        end: today + 'T18:00:00',
//                        title: 'M654',
//                        description: 'This is a  event'
//                    },
//                    {
//                        id: '15',
//                        resourceId: 'f5',
//                        start: today + 'T18:00:00',
//                        end: today + 'T23:00:00',
//                        title: 'M016',
//                        description: 'This is a  event'
//                    }
                ],
                eventRender: function (event, element) {
//                    cc(event.id);
//                    cc(element);
//                    element.qtip({
//                        content: event.description
//                    });
                },
                dayClick: function () {
//                    $('#calendar').fullCalendar('next');
                },

                schedulerLicenseKey: 'CC-Attribution-NonCommercial-NoDerivatives'
            });
            // }
        };
        var dateRangePicker = function () {
            function e(e, a, r) {
                var o = "", l = "";
                a - e < 100 ? (o = "Today:", l = e.format("MMM D")) : "Yesterday" == r ? (o = "Yesterday:", l = e.format("MMM D")) : l = e.format("MMM D") + " - " + a.format("MMM D"), t.find(".m-subheader__daterange-date").html(l), t.find(".m-subheader__daterange-title").html(o)
            }

            if (0 != $("#m_dashboard_daterangepicker").length) {
                var t = $("#m_dashboard_daterangepicker"), a = moment(), r = moment();
                t.daterangepicker({
                    startDate: a,
                    endDate: r,
                    opens: "left",
                    ranges: {
                        Today: [moment(), moment()],
                        Yesterday: [moment().subtract(1, "days"), moment().subtract(1, "days")],
                        "Last 7 Days": [moment().subtract(6, "days"), moment()],
                        "Last 30 Days": [moment().subtract(29, "days"), moment()],
                        "This Month": [moment().startOf("month"), moment().endOf("month")],
                        "Last Month": [moment().subtract(1, "month").startOf("month"), moment().subtract(1, "month").endOf("month")]
                    }
                }, e), e(a, r, "")
            }
        };

        function quickAction(e) {
            cc('quickAction');
            var pp = e.parentElement.parentElement.parentElement.parentElement.parentElement.childNodes;
            cc(e.id);
//            cc(pp);
//            cc(workCenter);

            var today = new Date().toISOString().substr(0, 10);

            var colors = [
                '#2f7ed8',
                '#0d233a',
                '#8bbc21',
                '#910000',
                '#1aadce',
                '#492970',
                '#f28f43',
                '#77a1e5',
                '#c42525',
                '#a6c96a'
            ]
            var s = Math.round(Math.random() * 20);
            var ss;
            if (s < 10) {
                ss = 'T0' + s + ':00:00';
            } else {
                ss = 'T' + s + ':00:00';
            }
            var d = s + Math.round(4 + Math.random() * 10);
            var dd;
            if (d > 24) {
                d = 24
            }
            if (d < 10) {
                dd = 'T0' + d + ':00:00';
            } else {
                dd = 'T' + d + ':00:00';
            }
            $('#calendar').fullCalendar('renderEvent', {
                id: e.id + 'e',
                resourceId: e.id,
                start: today + ss,
                end: today + dd,
                title: 'M639A',
                description: 'This is a  event',
                color: colors[Math.round(Math.random() * 8)]
            });

        }

        //todo

        var creatTableOrder = function (rows) {
//            if (0 !== $("#m_datatable_latest_orders").length)
            aa = $(".m_datatable").mDatatable({
                // data: {
                //     type: "remote",
                //     // source: {read: {url: "http://keenthemes.com/metronic/preview/inc/api/datatables/demos/default.php"}},
                //     source: {read: {url: "dataTable.json"}},
                //     pageSize: 10,
                //     saveState: {cookie: !0, webstorage: !0},
                //     serverPaging: !0,
                //     serverFiltering: !0,
                //     serverSorting: !0
                // },
                data: {type: "local", source: rows, pageSize: 10},
                layout: {theme: "default", class: "", scroll: true, height: 500, footer: false},
                sortable: !0,
                pagination: !0,
                search: {input: $("#generalSearch")},
                columns: [
                    {
                        field: "RecordID",
                        title: "#",
                        sortable: !1,
                        width: 40,
                        selector: {class: "m-checkbox--solid m-checkbox--brand"},
                        textAlign: "center"
                    },
                    {
                        field: "Status", title: "Status", width: 100, template: function (e) {
                        var t = {
                            1: {title: "Hold", class: "m-badge--brand"},
                            2: {title: "Scheduled", class: " m-badge--metal"},
                            3: {title: "Cancelled", class: " m-badge--primary"},
                            4: {title: "Success", class: " m-badge--success"},
                            5: {title: "Info", class: " m-badge--info"},
                            6: {title: "urgent", class: " m-badge--danger"},
                            7: {title: "Unscheduled", class: " m-badge--warning"}
                        };
                        return '<span class="m-badge ' + t[e.Status].class + ' m-badge--wide">' + t[e.Status].title + "</span>"
                    }
                    },
                    {
                        field: "OrderID",
                        title: "OrderID",
                        sortable: "asc",
                        filterable: !1,
                        width: 80,
//                            template: "{{OrderID}} - {{ShipCountry}}"
                    },
                    {
                        field: "MATERIAL",
                        title: "ProductID",
                        sortable: "asc",
                        filterable: !1,
                        width: 100,
//                            template: "{{OrderID}} - {{ShipCountry}}"
                    },
                    {
                        field: "TARGET",
                        title: "Target",
                        width: 80,
//                            responsive: {visible: "lg"}
                    },
//                        {
//                            field: "START",
//                            title: "Start",
//                            width: 85,
////                            responsive: {visible: "lg"}
//                        },
                    {
                        field: "END",
                        title: "Due Date",
                        width: 85,
                    },
                    {
                        field: "WCG",
                        title: "WCG",
                        width: 80,
                    },
                    {
                        field: "Mold",
                        title: "Mold",
                        width: 60,
                    },

                    {
                        field: "Actions",
                        width: 80,
                        title: "Actions",
                        sortable: !1,
                        overflow: "visible",
                        template: function (e) {
//                            cc('template');

                            if (e.Status == 7) {
                                cc(e.wcID);
//                                cc(e.WCG);
                                var wcg = '';
                                var wcgNAME = '';
                                for (n = 0; n < floorMaps.length; n++) {
                                    if (e.WCG == floorMaps[n]['unitName']) {
                                        wcg = floorMaps[n]['recordID'];
                                        wcgNAME = floorMaps[n]['unitName']
                                        n = floorMaps.length;
                                    }
                                }
//                                cc('recordID ' + wcg);
                                var prs = [];
                                var prsSTR = '';
                                for (n = 0; n < floorMaps.length; n++) {
                                    if (floorMaps[n]['idUnitParent'] == wcg) {

                                        if (mmmArray[e.Mold] != null && mmmArray[e.Mold].indexOf(floorMaps[n]['MOLD_Machine_Matrix']) > 0) {
//                                            cc(e.Mold);
//                                            cc(mmmArray[e.Mold]);
//                                            cc(floorMaps[n]['unitName']);
//                                            cc(floorMaps[n]['MOLD_Machine_Matrix']);
                                            prs.push({
                                                'unitName': floorMaps[n]['unitName'],
                                                'MOLD_Machine_Matrix': floorMaps[n]['MOLD_Machine_Matrix']
                                            });
                                            cc(floorMaps[n]['unitName']);
                                            prsSTR += '<a class="dropdown-item" onclick="quickAction(this)" id=' +
                                                '"' +
                                                wcgNAME + '_' + floorMaps[n]['unitName'] +
                                                '"' +
                                                '><i class="la la-wrench"></i>' +
                                                'assign to ' + floorMaps[n]['unitName'] +
                                                '</a>';
                                        }

                                    }
                                }
//                                if (prsSTR.length > 0) {
//                                    cc(e.Mold);
//                                    cc(mmmArray[e.Mold]);
//                                    cc('=======');
//                                    cc(prsSTR);
//                                    cc('=======');
//                                }

                                return '<div class="dropdown ' + (e.getDatatable().getPageSize() - e.getIndex() <= 4 ? "dropup" : "") + '">' +
                                    '       <a href="#" class="btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" data-toggle="dropdown">' +
                                    '           <i class="la la-ellipsis-h"></i>' +
                                    '       </a>' +
                                    '       <div class="dropdown-menu dropdown-menu-right">' +
                                    prsSTR +
                                    '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-undo"></i>Undo Last</a>' +
                                    '       </div>' +
                                    '   </div>' +
                                    '   <a href="#basic" data-toggle="modal" class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" title="View ">' +
                                    '       <i class="la la-edit"></i>' +
                                    '   </a>';
                            } else {
                                return '<div class="dropdown ' + (e.getDatatable().getPageSize() - e.getIndex() <= 4 ? "dropup" : "") + '">' +
                                    '       <a href="#draggable" class="btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" data-toggle="dropdown">' +
                                    '           <i class="la la-ellipsis-h"></i>' +
                                    '       </a>' +
                                    '       <div class="dropdown-menu dropdown-menu-right">' +
                                    //                                    '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-edit" "></i>Action I</a>' +
                                    //                                    '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-leaf"></i>Action II</a>' +
                                    '           <a class="dropdown-item" onclick="quickAction(this)"><i class="la la-print"></i>Undo Last</a>' +
                                    '       </div>' +
                                    '   </div>' +
                                    '   <a href="#basic" data-toggle="modal" class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" title="View ">' +
                                    '       <i class="la la-edit"></i>' +
                                    '   </a>';
                            }

                        }
                    }]
            });


            var i = aa.getDataSourceQuery();

            $("#m_form_status").on("change", function () {
                aa.search($(this).val(), "Status")
            }).val(void 0 !== i.Status ? i.Status : "");

            $("#m_form_type").on("change", function () {
//                cc(i);
//                cc(($(this).val()));
                aa.search($(this).val(), "WCG");
//                cc(aa);
            }).val(void 0 !== i.WCG ? i.WCG : "");

            $("#m_form_status, #m_form_type").selectpicker()
        };
        //        creatTableOrder
    </script>
</head>

<body>
<!-- begin:: Page -->
<div class="m-grid m-grid--hor m-grid--root m-page">

    <!-- begin::Body -->
    <div class="m-grid__item m-grid__item--fluid m-grid m-grid--hor-desktop m-grid--desktop m-body">
        <div class="m-grid__item m-grid__item--fluid  m-grid m-grid--ver	m-container m-container--responsive m-container--xxl m-page__container">
            <div class="m-grid__item m-grid__item--fluid m-wrapper">
                <!-- BEGIN: Subheader -->
                <div class="m-subheader ">
                    <div class="d-flex align-items-center">
                        <div class="mr-auto">
                            <h3 class="m-subheader__title ">
                                Schedule Board
                            </h3>
                        </div>
                        <div>
                            <span class="m-subheader__daterange" id="m_dashboard_daterangepicker">
										<span class="m-subheader__daterange-label">
											<span class="m-subheader__daterange-title"></span>
											<span class="m-subheader__daterange-date m--font-brand"></span>
										</span>
										<a href="#"
                                           class="btn btn-sm btn-brand m-btn m-btn--icon m-btn--icon-only m-btn--custom m-btn--pill">
											<i class="la la-angle-down"></i>
										</a>
                            </span>
                        </div>
                    </div>
                </div>
                <!-- END: Subheader -->
                <div class="m-content">

                    <div class="row">
                        <div class="col-xl-9">
                            <div class="m-portlet m-portlet--mobile ">
                                <div class="m-portlet__head">
                                    <div class="m-portlet__head-caption">
                                        <div class="m-portlet__head-title">
                                            <h3 class="m-portlet__head-text">
                                                Production Order
                                            </h3>
                                        </div>
                                    </div>
                                    <div class="m-portlet__head-tools">
                                        <ul class="m-portlet__nav">
                                            <li class="m-portlet__nav-item">
                                                <div class="m-dropdown m-dropdown--inline m-dropdown--arrow m-dropdown--align-right m-dropdown--align-push"
                                                     data-dropdown-toggle="hover" aria-expanded="true">
                                                    <a href="#"
                                                       class="m-portlet__nav-link btn btn-lg btn-secondary  m-btn m-btn--icon m-btn--icon-only m-btn--pill  m-dropdown__toggle">
                                                        <i class="la la-ellipsis-h m--font-brand"></i>
                                                    </a>
                                                    <div class="m-dropdown__wrapper">
                                                        <span class="m-dropdown__arrow m-dropdown__arrow--right m-dropdown__arrow--adjust"></span>
                                                        <div class="m-dropdown__inner">
                                                            <div class="m-dropdown__body">
                                                                <div class="m-dropdown__content">
                                                                    <ul class="m-nav">
                                                                        <li class="m-nav__section m-nav__section--first">
																					<span class="m-nav__section-text">
																						Quick Actions
																					</span>
                                                                        </li>
                                                                        <li class="m-nav__item">
                                                                            <a href="" class="m-nav__link">
                                                                                <i class="m-nav__link-icon flaticon-share"></i>
                                                                                <span class="m-nav__link-text">
																							Create Post
																						</span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="m-nav__item">
                                                                            <a href="" class="m-nav__link">
                                                                                <i class="m-nav__link-icon flaticon-chat-1"></i>
                                                                                <span class="m-nav__link-text">
																							Send Messages
																						</span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="m-nav__item">
                                                                            <a href="" class="m-nav__link">
                                                                                <i class="m-nav__link-icon flaticon-multimedia-2"></i>
                                                                                <span class="m-nav__link-text">
																							Upload File
																						</span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="m-nav__section">
																					<span class="m-nav__section-text">
																						Useful Links
																					</span>
                                                                        </li>
                                                                        <li class="m-nav__item">
                                                                            <a href="" class="m-nav__link">
                                                                                <i class="m-nav__link-icon flaticon-info"></i>
                                                                                <span class="m-nav__link-text">
																							FAQ
																						</span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="m-nav__item">
                                                                            <a href="" class="m-nav__link">
                                                                                <i class="m-nav__link-icon flaticon-lifebuoy"></i>
                                                                                <span class="m-nav__link-text">
																							Support
																						</span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="m-nav__separator m-nav__separator--fit m--hide"></li>
                                                                        <li class="m-nav__item m--hide">
                                                                            <a href="#"
                                                                               class="btn btn-outline-danger m-btn m-btn--pill m-btn--wide btn-sm">
                                                                                Submit
                                                                            </a>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="m-portlet__body">
                                    <!--begin: Search Form -->
                                    <div class="m-form m-form--label-align-right m--margin-top-20 m--margin-bottom-30">
                                        <div class="row align-items-center">
                                            <div class="col-xl-12 order-2 order-xl-1">
                                                <div class="form-group m-form__group row align-items-center">

                                                    <div class="col-md-5">
                                                        <div class="m-form__group m-form__group--inline">
                                                            <div class="m-form__label">
                                                                <label class="m-label m-label--single"
                                                                       style="white-space:nowrap">
                                                                    Working Center Group:
                                                                </label>
                                                            </div>
                                                            <div class="m-form__control">
                                                                <select class="form-control m-bootstrap-select m-bootstrap-select--solid"
                                                                        id="m_form_type">
                                                                    <option value="">
                                                                        All
                                                                    </option>
                                                                    <option value="GROUP6">
                                                                        GROUP6
                                                                    </option>
                                                                    <option value="GROUP1">
                                                                        GROUP1
                                                                    </option>
                                                                    <option value="GROUP2">
                                                                        GROUP2
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="d-md-none m--margin-bottom-10"></div>
                                                    </div>
                                                    <div class="col-md-5">
                                                        <div class="m-form__group m-form__group--inline">
                                                            <!--<div class="m-form__label">-->
                                                            <!--<label>-->
                                                            <!---->
                                                            <!--</label>-->
                                                            <!--</div>-->
                                                            <div class="m-form__control">
                                                                <select class="form-control m-bootstrap-select m-bootstrap-select--solid"
                                                                        id="m_form_status">
                                                                    <option value="">
                                                                        All
                                                                    </option>
                                                                    <option value="1">
                                                                        Hold
                                                                    </option>
                                                                    <option value="2">
                                                                        Scheduled
                                                                    </option>
                                                                    <option value="3">
                                                                        Cancelled
                                                                    </option>
                                                                    <option value="4">
                                                                        Success
                                                                    </option>
                                                                    <option value="5">
                                                                        Info
                                                                    </option>
                                                                    <option value="6">
                                                                        urgent
                                                                    </option>
                                                                    <option value="7">
                                                                        Unscheduled
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="d-md-none m--margin-bottom-10"></div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="m-input-icon m-input-icon--left">
                                                            <input type="text"
                                                                   class="form-control m-input m-input--solid"
                                                                   placeholder="Search..." id="generalSearch">
                                                            <span class="m-input-icon__icon m-input-icon__icon--left">
															<span>
																<i class="la la-search"></i>
															</span>
														</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--end: Search Form -->
                                    <!--begin: Datatable -->
                                    <div class="m_datatable" id="m_datatable_latest_orders"></div>
                                    <!--end: Datatable -->
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3">
                            <!--begin:: Widgets/Audit Log-->
                            <div class="m-portlet m-portlet--full-height ">
                                <div class="m-portlet__head">
                                    <div class="m-portlet__head-caption">
                                        <div class="m-portlet__head-title">
                                            <h3 class="m-portlet__head-text">
                                                Audit Log
                                            </h3>
                                        </div>
                                    </div>
                                    <div class="m-portlet__head-tools">
                                        <ul class="nav nav-pills nav-pills--brand m-nav-pills--align-right m-nav-pills--btn-pill m-nav-pills--btn-sm"
                                            role="tablist">
                                            <li class="nav-item m-tabs__item">
                                                <a class="nav-link m-tabs__link active" data-toggle="tab"
                                                   href="#m_widget4_tab1_content" role="tab">
                                                    Today
                                                </a>
                                            </li>
                                            <!--<li class="nav-item m-tabs__item">-->
                                            <!--<a class="nav-link m-tabs__link" data-toggle="tab"-->
                                            <!--href="#m_widget4_tab2_content" role="tab">-->
                                            <!--Week-->
                                            <!--</a>-->
                                            <!--</li>-->
                                            <li class="nav-item m-tabs__item">
                                                <a class="nav-link m-tabs__link" data-toggle="tab"
                                                   href="#m_widget4_tab3_content" role="tab">
                                                    Month
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="m-portlet__body">
                                    <div class="tab-content">
                                        <div class="tab-pane active" id="m_widget4_tab1_content">
                                            <div class="m-scrollable" data-scrollable="true" data-max-height="400"
                                                 style="height: 400px; overflow: hidden;">
                                                <div class="m-list-timeline m-list-timeline--skin-light">
                                                    <div class="m-list-timeline__items">
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--success"></span>
                                                            <span class="m-list-timeline__text">
																		12 new users registered
																	</span>
                                                            <span class="m-list-timeline__time">
																		Just now
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--info"></span>
                                                            <span class="m-list-timeline__text">
																		System shutdown
																		<span class="m-badge m-badge--success m-badge--wide">
																			Hold
																		</span>
																	</span>
                                                            <span class="m-list-timeline__time">
																		14 mins
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--danger"></span>
                                                            <span class="m-list-timeline__text">
																		New invoice received
																	</span>
                                                            <span class="m-list-timeline__time">
																		20 mins
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--accent"></span>
                                                            <span class="m-list-timeline__text">
																		DB overloaded 80%
																		<span class="m-badge m-badge--info m-badge--wide">
																			settled
																		</span>
																	</span>
                                                            <span class="m-list-timeline__time">
																		1 hr
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--warning"></span>
                                                            <span class="m-list-timeline__text">
																		System error -
																		<a href="#" class="m-link">
																			Check
																		</a>
																	</span>
                                                            <span class="m-list-timeline__time">
																		2 hrs
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--brand"></span>
                                                            <span class="m-list-timeline__text">
																		Production server down
																	</span>
                                                            <span class="m-list-timeline__time">
																		3 hrs
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--info"></span>
                                                            <span class="m-list-timeline__text">
																		Production server up
																	</span>
                                                            <span class="m-list-timeline__time">
																		5 hrs
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--success"></span>
                                                            <span href="" class="m-list-timeline__text">
																		New order received
																		<span class="m-badge m-badge--danger m-badge--wide">
																			urgent
																		</span>
																	</span>
                                                            <span class="m-list-timeline__time">
																		7 hrs
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--success"></span>
                                                            <span class="m-list-timeline__text">
																		12 new users registered
																	</span>
                                                            <span class="m-list-timeline__time">
																		Just now
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--info"></span>
                                                            <span class="m-list-timeline__text">
																		System shutdown
																		<span class="m-badge m-badge--success m-badge--wide">
																			Hold
																		</span>
																	</span>
                                                            <span class="m-list-timeline__time">
																		14 mins
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--danger"></span>
                                                            <span class="m-list-timeline__text">
																		New invoice received
																	</span>
                                                            <span class="m-list-timeline__time">
																		20 mins
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--accent"></span>
                                                            <span class="m-list-timeline__text">
																		DB overloaded 80%
																		<span class="m-badge m-badge--info m-badge--wide">
																			settled
																		</span>
																	</span>
                                                            <span class="m-list-timeline__time">
																		1 hr
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--danger"></span>
                                                            <span class="m-list-timeline__text">
																		New invoice received
																	</span>
                                                            <span class="m-list-timeline__time">
																		20 mins
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--accent"></span>
                                                            <span class="m-list-timeline__text">
																		DB overloaded 80%
																		<span class="m-badge m-badge--info m-badge--wide">
																			settled
																		</span>
																	</span>
                                                            <span class="m-list-timeline__time">
																		1 hr
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--warning"></span>
                                                            <span class="m-list-timeline__text">
																		System error -
																		<a href="#" class="m-link">
																			Check
																		</a>
																	</span>
                                                            <span class="m-list-timeline__time">
																		2 hrs
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--brand"></span>
                                                            <span class="m-list-timeline__text">
																		Production server down
																	</span>
                                                            <span class="m-list-timeline__time">
																		3 hrs
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--info"></span>
                                                            <span class="m-list-timeline__text">
																		Production server up
																	</span>
                                                            <span class="m-list-timeline__time">
																		5 hrs
																	</span>
                                                        </div>
                                                        <div class="m-list-timeline__item">
                                                            <span class="m-list-timeline__badge m-list-timeline__badge--success"></span>
                                                            <span href="" class="m-list-timeline__text">
																		New order received
																		<span class="m-badge m-badge--danger m-badge--wide">
																			urgent
																		</span>
																	</span>
                                                            <span class="m-list-timeline__time">
																		7 hrs
																	</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tab-pane" id="m_widget4_tab2_content"></div>
                                        <div class="tab-pane" id="m_widget4_tab3_content"></div>
                                    </div>
                                </div>
                            </div>
                            <!--end:: Widgets/Audit Log-->
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xl-12">
                            <!--begin::Portlet-->
                            <div class="m-portlet" id="m_portlet">
                                <div class="m-portlet__head">
                                    <div class="m-portlet__head-caption">
                                        <div class="m-portlet__head-title">
													<span class="m-portlet__head-icon">
														<i class="flaticon-map-location"></i>
													</span>
                                            <h3 class="m-portlet__head-text">
                                                Calendar
                                            </h3>
                                        </div>
                                    </div>
                                    <div class="m-portlet__head-tools">
                                        <ul class="m-portlet__nav">
                                            <li class="m-portlet__nav-item">
                                                <a href="#"
                                                   class="btn btn-accent m-btn m-btn--custom m-btn--icon m-btn--pill m-btn--air">
															<span>
																<i class="la la-plus"></i>
																<span>
																	Add Event
																</span>
															</span>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="m-portlet__body">
                                    <div id="calendar"></div>
                                </div>
                            </div>
                            <!--end::Portlet-->
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="basic" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"
                            aria-hidden="true"></button>
                    <h4 class="modal-title">Modal Title</h4>
                </div>
                <div class="modal-body"> Modal body goes here</div>
                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal">
                        Close
                    </button>
                    <button type="button" class="btn green">Save changes</button>
                </div>
                <div class="inbox">

                    <div class="col-md-12">
                        <div class="inbox-body">
                            <div class="inbox-content"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

</div>

<script src="Common/metronic_v5.0.5/assets/vendors/base/vendors.bundle.js" type="text/javascript"></script>
<script src="Common/metronic_v5.0.5/assets/demo/demo2/base/scripts.bundle.js" type="text/javascript"></script>
<script src="Common/metronic_v5.0.5/assets/vendors/custom/fullcalendar/fullcalendar.js"
        type="text/javascript"></script>
<script src='Common/metronic_v5.0.5/assets/vendors/custom/fullcalendar/scheduler.js'></script>
<script src='Common/metronic_v5.0.5/assets/vendors/custom/fullcalendar/moment.min.js'></script>
<script src='Common/js/silent.js'></script>


<!--<script src="Common/metronic_v4.7.5/assets/global/plugins/jquery.min.js" type="text/javascript"></script>-->

<!--<script src="Common/metronic_v4.7.5/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>-->

<!--<script src="Common/metronic_v4.7.5/assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>-->

<!--<script src="Common/metronic_v4.7.5/assets/global/plugins/bootstrap-wysihtml5/wysihtml5-0.3.0.js" type="text/javascript"></script>-->
<!--<script src="Common/metronic_v4.7.5/assets/global/plugins/bootstrap-wysihtml5/bootstrap-wysihtml5.js" type="text/javascript"></script>-->
<!--<script src="Common/metronic_v4.7.5/assets/global/plugins/jquery-file-upload/js/vendor/jquery.ui.widget.js"-->
        <!--type="text/javascript"></script>-->

<!--<script src="jquery.fileupload.js" type="text/javascript"></script>-->

<!--<script src="app.js" type="text/javascript"></script>-->

<!--<script src="inbox.js" type="text/javascript"></script>-->



</body>
<!-- end::Body -->
</html>
